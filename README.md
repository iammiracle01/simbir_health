# Simbir_Health

## Общее описание задачи:

В данном проекте разрабатывается микросервисное приложение, моделирующее работу больницы. Приложение состоит из следующих микросервисов:

- **Account microservice** — отвечает за авторизацию пользователей и управление их данными. Выпускает JWT токены и проводит их интроспекцию.
- **Hospital microservice** — хранит данные о больницах, подключённых к системе. Для аутентификации запрашивает микросервис аккаунтов для проверки токенов.
- **Timetable microservice** — управляет расписанием врачей и больниц, а также записью на приём. Запрашивает данные из микросервиса аккаунтов для проверки токенов и взаимодействует с микросервисом больниц.
- **Document microservice** — хранит историю посещений пользователей. Для аутентификации обращается к микросервису аккаунтов и больниц. **Этот сервис доступен только после запуска Elasticsearch.**

## Архитектура приложения:

1. **Account microservice** — генерирует JWT токены и обеспечивает интроспекцию.
2. **Hospital microservice** — управляет данными о больницах и взаимодействует с сервисом аккаунтов.
3. **Timetable microservice** — управляет расписанием и записями, взаимодействует с сервисами аккаунтов и больниц.
4. **Document microservice** — ведет историю посещений, требует работающий Elasticsearch для работы.

## API Документация:

- **Account Service:** [http://localhost:8001/docs](http://localhost:8001/docs)
- **Hospital Service:** [http://localhost:8002/docs](http://localhost:8002/docs)
- **Timetable Service:** [http://localhost:8003/docs](http://localhost:8003/docs)
- **Document Service:** [http://localhost:8004/docs](http://localhost:8004/docs) (Доступен только после запуска Elasticsearch)

## Дополнительное задание:

1. **Elasticsearch URL:** [http://localhost:9200](http://localhost:9200)
2. **Kibana URL:** [http://localhost:5601](http://localhost:5601)

## Развертывание приложения:

Для запуска приложения выполните следующие шаги:

1. Клонируйте репозиторий:
    ```bash
    git clone https://github.com/yourusername/simbir_health.git
    ```

2. Перейдите в директорию проекта:
    ```bash
    cd simbir_health
    ```

3. Убедитесь, что у вас установлены Docker и Docker Compose. Если нет, установите их, следуя инструкциям для вашей операционной системы.

4. Запустите приложение:
    ```bash
    docker-compose up -d
    ```

5. Приложение поднимет следующие сервисы:
    - **Account Service** на порту `8001`
    - **Hospital Service** на порту `8002`
    - **Timetable Service** на порту `8003`
    - **Document Service** на порту `8004` (Требует работающий Elasticsearch)
    - **Elasticsearch** на порту `9200`
    - **Kibana** на порту `5601`

## Использование Elasticsearch для поиска:

Elasticsearch используется в Document Service для поиска по истории посещений. Этот сервис не будет доступен до тех пор, пока Elasticsearch не будет запущен. Убедитесь, что Elasticsearch работает перед попыткой доступа к Document Service.

## Настройки пользователей и тестовых данных:

Все сервисы будут запущены с предустановленными настройками и тестовыми данными. Пользователи могут использоваться для авторизации и проверки функциональности приложения.

